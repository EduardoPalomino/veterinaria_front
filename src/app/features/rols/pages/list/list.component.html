<p-card>

  <div class="flex grid">

    <!-- Sidebar - 20% en desktop, 100% en móvil -->
    <div class="col-12 md:col-12 lg:col-2 bg-gray-100" >
      <div class="grid flex">
        <div class="col-12">
          <!-- Titulo -->
          <moduleBoxTitle [title]="'REPORTES'"></moduleBoxTitle>
        </div>
        <div class="col-12">
          <!-- Botones -->
          <moduleBoxLinks [title]="'REPORTES'"></moduleBoxLinks>
        </div>
        <div class="col-12">
          <moduleBoxButton></moduleBoxButton>
        </div>
        <div class="col-12">
          <!-- Crear Nuevo -->
          <div class="flex flex-column align-items-center" style="gap: 8px;">
            <!-- Botón circular grande con ícono "+" -->
            <button
              pButton
              type="button"
              icon="pi pi-plus"
              class="p-button-rounded p-button-lg custom-circle-button"
            ></button>

            <!-- Label descriptivo -->
            <span class="text-lg font-medium">Generar cliente</span>
          </div>
        </div>
      </div>
    </div>
    <!-- Main - 80% en desktop "maria click nueva venta" (espacio restante), 100% en móvil -->
    <div class="col-12 md:col-12 lg:col-10 pt-0 pb-0" >
      <div class="w-full panel-menu  p-2 sm:p-3 md:p-4" style="box-sizing: border-box;">
        <menuTop></menuTop>
      </div>
      <div class="panel-filtro  p-2 sm:p-3 md:p-4" style="box-sizing: border-box;">
        <div class="grid">
          <!-- Primera fila: Dropdowns principales -->
          <div class="col-12 md:col-6 lg:col-3">
            <p-dropdown
              id="categoria_id"
              formControlName="categoria_id"
              optionLabel="label"
              optionValue="value"
              placeholder="Categoría"
              [style]="{'width':'100%'}"
            >
            </p-dropdown>
          </div>
          <div class="col-12 md:col-6 lg:col-3">
            <p-dropdown
              id="mixto_id"
              formControlName="mixto_id"
              optionLabel="label"
              optionValue="value"
              placeholder="Ventas,Productos,Precios"
              [style]="{'width':'100%'}"
              >
            </p-dropdown>
          </div>
          <div class="col-12 md:col-12 lg:col-2">
            <span class="p-input-icon-left w-full">
              <i class="pi pi-search"></i>
              <input
                pInputText
                type="text"
                placeholder="Buscar"
                class="w-full"
                [(ngModel)]="globalFilter"
                (ngModelChange)="applyGlobalFilter()">
            </span>
          </div>

          <div class="col-6 md:col-6 lg:col-2">
            <p-calendar
              placeholder="Inicio"
              formControlName="fechaInicio"
              dateFormat="dd/mm/yy"
              [showIcon]="true"

              >
            </p-calendar>
          </div>

          <div class="col-6 md:col-6 lg:col-2">
            <p-calendar
              placeholder="Fin"
              formControlName="fechaFin"
              dateFormat="dd/mm/yy"
              [showIcon]="true"

              >
            </p-calendar>
          </div>

        </div>
      </div>



      <div class="w-full panel-data">
        <!--grid-->
        <div class="grid">
          <!-- ============================================= -->
          <!-- VERSIÓN MOBILE (iPhone) - 1 COLUMNA VERTICAL -->
          <!-- ============================================= -->
          <div class="col-12 block md:hidden">
            <!-- Registro 1 -->
            <div class="bg-gray-100 p-2 border-1 border-gray-200 border-round-md">
              <table class="w-full tabla-grid-ui">
                <thead>
                <tr class="border-bottom-1 surface-border">
                  <th class="text-left p-2 ">REGISTRO #1</th>
                </tr>
                </thead>
                <tbody>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2 pt-0 pb-0"><strong>ID : </strong>101</td>
                </tr>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2 pt-0 pb-0"><strong>Nombre : </strong>Ana Pérez</td>
                </tr>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2 pt-0 pb-0"><strong>Edad : </strong>28</td>
                </tr>
                </tbody>
              </table>
            </div>
            <!-- Registro 1 -->
            <div class="bg-gray-100 p-2 border-1 border-gray-200 border-round-md">
              <table class="w-full tabla-grid-ui">
                <thead>
                <tr class="border-bottom-1 surface-border">
                  <th class="text-left p-2">REGISTRO #1</th>
                </tr>
                </thead>
                <tbody>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2 pt-0 pb-0"><strong>ID : </strong>101</td>
                </tr>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2 pt-0 pb-0"><strong>ID : </strong>101</td>
                </tr>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2 pt-0 pb-0"><strong>ID : </strong>101</td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- ========================================== -->
          <!-- VERSIÓN TABLET - 3 COLUMNAS EN HORIZONTAL -->
          <!-- ========================================== -->
          <div class="col-12 hidden md:block lg:hidden">
            <div class="grid">
              <!-- Fila de Registros -->
              <div class="col-4">
                <div class="surface-card p-3 m-2 border-round-lg shadow-1">
                  <table class="w-full tabla-grid-ui">
                    <thead>
                    <tr class="border-bottom-1 surface-border">
                      <th class="text-left p-2 ">REGISTRO #1</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>ID : </strong>101</td>
                    </tr>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>Nombre : </strong>Ana Pérez</td>
                    </tr>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>Edad : </strong>28</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="col-4">
                <div class="surface-card p-3 m-2 border-round-lg shadow-1">
                  <table class="w-full tabla-grid-ui">
                    <thead>
                    <tr class="border-bottom-1 surface-border">
                      <th class="text-left p-2 ">REGISTRO #1</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>ID : </strong>101</td>
                    </tr>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>Nombre : </strong>Ana Pérez</td>
                    </tr>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>Edad : </strong>28</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="col-4">
                <div class="surface-card p-3 m-2 border-round-lg shadow-1">
                  <table class="w-full tabla-grid-ui">
                    <thead>
                    <tr class="border-bottom-1 surface-border">
                      <th class="text-left p-2 ">REGISTRO #1</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>ID : </strong>101</td>
                    </tr>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>Nombre : </strong>Ana Pérez</td>
                    </tr>
                    <tr class="border-bottom-1 surface-border">
                      <td class="p-2 pt-0 pb-0"><strong>Edad : </strong>28</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- ========================================== -->
          <!-- VERSIÓN DESKTOP - TABLA HORIZONTAL COMPLETA -->
          <!-- ========================================== -->
          <div class="col-12 hidden lg:block">
            <div class="surface-card p-2 border-round-lg shadow-2">
              <table class="w-full tabla-grid-ui">
                <thead>
                <tr class="border-bottom-1 surface-border">
                  <th class="text-left p-2">ID</th>
                  <th class="text-left p-2">Nombre</th>
                  <th class="text-left p-2">Edad</th>
                  <th class="text-left p-2">Email</th>
                  <th class="text-left p-2">Teléfono</th>
                  <th class="text-left p-2">Ciudad</th>
                  <th class="text-left p-2">País</th>
                  <th class="text-left p-2">Estado</th>
                  <th class="text-left p-2">Fecha</th>
                  <th class="text-left p-2">Saldo</th>
                </tr>
                </thead>
                <tbody>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2">101</td>
                  <td class="p-2">Ana Pérez</td>
                  <td class="p-2">28</td>
                  <td class="p-2">ana@correo.com</td>
                  <td class="p-2">555-1001</td>
                  <td class="p-2">Lima</td>
                  <td class="p-2">Perú</td>
                  <td class="p-2 text-green-500">Activo</td>
                  <td class="p-2">2023-01-15</td>
                  <td class="p-2 text-primary font-bold">$1,200.00</td>
                </tr>
                <tr class="border-bottom-1 surface-border">
                  <td class="p-2">102</td>
                  <td class="p-2">Carlos López</td>
                  <td class="p-2">35</td>
                  <td class="p-2">carlos@correo.com</td>
                  <td class="p-2">555-1002</td>
                  <td class="p-2">Bogotá</td>
                  <td class="p-2">Colombia</td>
                  <td class="p-2 text-red-500">Inactivo</td>
                  <td class="p-2">2023-02-20</td>
                  <td class="p-2 text-primary font-bold">$2,500.00</td>
                </tr>
                <tr>
                  <td class="p-2">103</td>
                  <td class="p-2">Luisa Méndez</td>
                  <td class="p-2">31</td>
                  <td class="p-2">luisa@correo.com</td>
                  <td class="p-2">555-1003</td>
                  <td class="p-2">Santiago</td>
                  <td class="p-2">Chile</td>
                  <td class="p-2 text-green-500">Activo</td>
                  <td class="p-2">2023-03-10</td>
                  <td class="p-2 text-primary font-bold">$1,800.00</td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!--grid-->
      </div>
    </div>
  </div>




































  <!--<ng-template pTemplate="title">Lista de Rol</ng-template>-->
  <ng-template pTemplate="content">
    <p-toast></p-toast>

    <div class="p-datatable-header">
      <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
        <span class="p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0">
          <i class="pi pi-search"></i>
          <input
            pInputText
            type="text"
            placeholder="Búsqueda"
            class="p-inputtext p-component p-element w-full"
            [(ngModel)]="globalFilter"
            (ngModelChange)="applyGlobalFilter()">
        </span>

        <button pButton icon="pi pi-user-plus" label="Nuevo Rol"
                class="p-button-sm p-button-outlined" (click)="openModal('Nuevo')">
        </button>
      </div>
    </div>

    <p-table #table [value]="filteredRols" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10, 20, 50, 100]"
             [globalFilterFields]="['descripcion']" [responsiveLayout]="'scroll'">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
          <th pSortableColumn="descripcion">Descripcion <p-sortIcon field="descripcion"></p-sortIcon></th>
          <th>Acciones</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-rol let-i="rowIndex">
        <tr>
          <td>{{ i + 1 }}</td>
          <td>{{ rol.descripcion }}</td>
          <td>
            <button pButton icon="pi pi-pencil" class="p-button-text p-button-sm p-button-warning" (click)="openModal('Editar', rol)"></button>
            <button pButton icon="pi pi-trash" class="p-button-text p-button-sm p-button-danger" (click)="confirmarEliminacion(rol)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <!-- Confirmation -->
    <p-confirmDialog></p-confirmDialog>
    <!-- Confirmation -->
    <!-- Modal -->
    <p-dialog [(visible)]="modalVisible" [header]="modalTitle" [modal]="true" [closable]="true" [style]="{width: '500px'}">
      <form [formGroup]="rolForm" >
        <div class="p-fluid">
           <div class="p-field">
            <label for="descripcionInput">Descripcion</label>
            <input pInputText id="descripcionInput" formControlName="descripcion" />
          </div>
          <input pInputText id="_idInput" formControlName="_id" [hidden]="true"  />

        </div>
        <div class="p-dialog-footer">
          <button pButton type="button" label="Cancelar" class="p-button-text" (click)="modalVisible = false"></button>
          <button pButton type="button" label="Guardar" class="p-button-text" (click)="saveRegistro()"></button>
        </div>
      </form>
    </p-dialog>
    <!-- Modal -->
  </ng-template>
</p-card>
